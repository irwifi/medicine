<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  </head>
  <body>
    <div class="col-md-3">
     <ul class="nav nav-pills">
       <li class="active"><a data-toggle="pill" href="#home" onclick="getElements()">Home</a></li>
       <li><a data-toggle="pill" href="#newElement">New ELement</a></li>
     </ul>
    </div>

    <div class="tab-content col-sm-10" >
      <div id="home" class="tab-pane fade in active">
          <table class="table" >
            <thead>
             <tr>
               <th>Element Name</th>
               <th>Action</th>
             </tr>
           </thead>
           <tbody>
            <% for(var i=0; i < data.length; i++) { %>
             <tr>
               <td><%= data[i].elementName %></td>
               <td>
                 <button type="button" class="btn btn-default" onclick="deleteElements('<%= data[i]._id %>')">Delete</button>
                 <button type="button" class="btn btn-default" data-toggle="modal", data-target="#myModal" >Edit</button>
               </td>
             </tr>
             <% } %>
           </tbody>
          </table>
      </div>
      <div id="newElement" class="tab-pane fade">
        <form class="form-horizontal">
          <br>
          <br>
          <div class="form-group">
            <label class="control-label col-sm-2" >Element Name</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" id="elementName" placeholder="Element name">
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2" >Top:</label>
            <div class="col-sm-10">
              <input type="number" class="form-control" id="top" placeholder="Top">
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2" >Left:</label>
            <div class="col-sm-10">
              <input type="number" class="form-control" id="left" placeholder="Left">
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2" >Size:</label>
            <div class="col-sm-10">
              <input type="number" class="form-control" id="size" placeholder="Size">
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2" >Color:</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" id="color" placeholder="Color">
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2" >Page:</label>
            <div class="col-sm-10">
              <input type="number" class="form-control" id="page" placeholder="Page">
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-2" >status:</label>
            <div class="col-sm-10">
              <input type="number" class="form-control" id="status" placeholder="status">
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
              <button type="button" class="btn btn-default" onclick="postElements()">Submit</button>
            </div>
          </div>
        </form>
      </div>
      <div id="myModal" role="dialog" class="modal fade">
        <div class="modal-dialog">
          <div class="modal-content">
            <div style="background-color:green" class="modal-header">
              <button type="button" data-dismiss="modal" class="close">Ã—</button>
              <center>
                <h4 class="modal-title">Edit</h4>
              </center>
            </div>
            <div class="modal-body"><br/>
              <div class="form-group row">
                <div class="col-xs-6">
                  <label>Element Name</label>
                  <input type="text" class="form-control"/>
                </div>
                <div class="col-xs-6">
                  <label>Top</label>
                  <input type="text" class="form-control"/>
                </div>
                <div class="col-xs-6">
                  <label>Left</label>
                  <input type="text"  class="form-control"/>
                </div>
                <div class="col-xs-6">
                  <label>Size</label>
                  <input type="text"  class="form-control"/>
                </div>
                <div class="col-xs-6">
                  <label>Color</label>
                  <input type="text"  class="form-control"/><br/>
                </div>
                <div class="col-xs-6">
                  <label>Page</label>
                  <input type="text"  class="form-control"/><br/>
                </div>
                <div class="col-xs-6">
                  <label>Status</label>
                  <input type="text"  class="form-control"/><br/>
                </div>
                <div class="col-xs-12">
                  <div class="col-xs-6">
                    <button type="button"  data-dismiss="modal" class="btn btn-primary btn-block">SUBMIT</button>
                  </div>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" data-dismiss="modal" class="btn btn-default">Close</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <script>
        function getElements(){
          // $.ajax({
          //   type:'get',
          //   url: "/elements/getElements",
          // }).done(function(data) {
          //
          // });
          location.reload();
          return
        }

        function deleteElements(id){
          var data=JSON.stringify({
            elementId:id
          })
          console.log(data)
          $.ajax({
            type: "POST",
            url: "elements/delete",
            dataType : "json",
            contentType: "application/json",
            data:data,
            success: function(response) {
              location.reload();
            },
            error: function(response) {
              alert("something went wrong")
            }
          })
        }


        function postElements(){
          var formData=JSON.stringify({
            elementName:document.getElementById('elementName').value,
            top:document.getElementById('top').value,
            left:document.getElementById('left').value,
            size:document.getElementById('size').value,
            color:document.getElementById('color').value,
            page:document.getElementById('page').value,
            status:document.getElementById('status').value,
          })
          console.log(formData)
          $.ajax({
            type: "POST",
            url: "elements/ele_post",
            dataType : "json",
            contentType: "application/json",
            data:formData,
            success: function(response) {
            console.log(response);
            },
            error: function(response) {
                console.log(formdata)
                console.log(response);
            }
          })
        }
    </script>
  </body>
</html>
