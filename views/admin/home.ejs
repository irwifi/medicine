<!DOCTYPE html>
<html>

<head>
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"></link>

	<style>
		body {
			margin:  0 auto;
			width:  1400px;
		}

		th, td {
			text-align: center;
		}
	</style>
</head>

<body>
	<div class="col-md-3">
		<ul class="nav nav-pills">
			<li class="active">
				<a data-toggle="pill" href="#home" onclick="getElements()">Home</a>
			</li>
			<li>
				<a data-toggle="pill" href="#newElement">New Category</a>
			</li>
		</ul>
	</div>
	<div class="tab-content col-sm-12">
		<div class="tab-pane fade in active" id="home">
			<table class="table table-bordered table-hover table-condensed table-striped">
				<thead>
					<tr>
						<th>Category Name</th>
						<th>Url</th>
						<th>Color</th>
						<th>Status</th>
						<th>Action</th>
					</tr>
				</thead>
				<tbody>
					<% for(var i=0; i < data.length; i++) { %>
						<tr>
							<td><%= data[i].catName %></td>
							<td><%= data[i].page %></td>
							<td><%= data[i].color %></td>
							<td><%= data[i].status %></td>
							<td>
								<button class="btn btn-default" onclick="deleteElements('<%= data[i]._id %>')" type="button">
									Delete
								</button>
								<button ,="" class="btn btn-default" data-target="#myModal" data-toggle="modal" type="button">
									Edit
								</button>
							</td>
						</tr>
						<% } %>
				</tbody>
			</table>
		</div>
		<div class="tab-pane fade" id="newElement">
			<form class="form-horizontal">
				<br>
				<br>
				<div class="form-group">
					<label class="control-label col-sm-2">
						Catgory Name
					</label>
					<div class="col-sm-10">
						<input class="form-control" id="elementName" placeholder="Catgory name" type="text">
						</input>
					</div>
				</div>
				<div class="form-group">
					<label class="control-label col-sm-2">
						Top:
					</label>
					<div class="col-sm-10">
						<input class="form-control" id="top" placeholder="Top" type="number">
						</input>
					</div>
				</div>
				<div class="form-group">
					<label class="control-label col-sm-2">
						Left:
					</label>
					<div class="col-sm-10">
						<input class="form-control" id="left" placeholder="Left" type="number">
						</input>
					</div>
				</div>
				<div class="form-group">
					<label class="control-label col-sm-2">
						Size:
					</label>
					<div class="col-sm-10">
						<input class="form-control" id="size" placeholder="Size" type="number">
						</input>
					</div>
				</div>
				<div class="form-group">
					<label class="control-label col-sm-2">
						Color:
					</label>
					<div class="col-sm-10">
						<input class="form-control" id="color" placeholder="Color" type="text">
						</input>
					</div>
				</div>
				<div class="form-group">
					<label class="control-label col-sm-2">
						Page:
					</label>
					<div class="col-sm-10">
						<input class="form-control" id="page" placeholder="Page" type="text">
						</input>
					</div>
				</div>
				<div class="form-group">
					<label class="control-label col-sm-2">
						Status:
					</label>
					<div class="col-sm-10">
						<input class="form-control" id="status" placeholder="status" type="text">
						</input>
					</div>
				</div>
				<div class="form-group">
					<div class="col-sm-offset-2 col-sm-10">
						<button class="btn btn-default" onclick="postElements()" type="button">
							Submit
						</button>
					</div>
				</div>
				</br>
				</br>
			</form>
		</div>
		<div class="modal fade" id="myModal" role="dialog">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header" style="background-color:green">
						<button class="close" data-dismiss="modal" type="button">
							Ã—
						</button>
						<center>
							<h4 class="modal-title">
								Edit
							</h4>
						</center>
					</div>
					<div class="modal-body">
						<br/>
						<div class="form-group row">
							<div class="col-xs-6">
								<label>
									Element Name
								</label>
								<input class="form-control" type="text" />
							</div>
							<div class="col-xs-6">
								<label>
									Top
								</label>
								<input class="form-control" type="text" />
							</div>
							<div class="col-xs-6">
								<label>
									Left
								</label>
								<input class="form-control" type="text" />
							</div>
							<div class="col-xs-6">
								<label>
									Size
								</label>
								<input class="form-control" type="text" />
							</div>
							<div class="col-xs-6">
								<label>
									Color
								</label>
								<input class="form-control" type="text" />
								<br/>
							</div>
							<div class="col-xs-6">
								<label>
									Page
								</label>
								<input class="form-control" type="text" />
								<br/>
							</div>
							<div class="col-xs-6">
								<label>
									Status
								</label>
								<input class="form-control" type="text" />
								<br/>
							</div>
							<div class="col-xs-12">
								<div class="col-xs-6">
									<button class="btn btn-primary btn-block" data-dismiss="modal" type="button">
										SUBMIT
									</button>
								</div>
							</div>
						</div>
						<div class="modal-footer">
							<button class="btn btn-default" data-dismiss="modal" type="button">
								Close
							</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script crossorigin="anonymous" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" src="https://code.jquery.com/jquery-3.2.1.slim.min.js">
	</script>
	<script crossorigin="anonymous" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js">
	</script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js">
	</script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js">
	</script>
	<script>
	function getElements( ) {
		// $.ajax({
		//   type:'get',
		//   url: "/elements/getElements",
		// }).done(function(data) {
		//
		// });
		location.reload( );
		return
	}

	function deleteElements( id ) {
		var data = JSON.stringify( {
			elementId: id
		} )
		console.log( data )
		$.ajax( {
			type: "POST",
			url: "elements/delete",
			dataType: "json",
			contentType: "application/json",
			data: data,
			success: function( response ) {
				location.reload( );
			},
			error: function( response ) {
				alert( "something went wrong" )
			}
		} )
	}

	function postElements( ) {
		var formData = JSON.stringify( {
			catName: document.getElementById( 'elementName' ).value,
			top: document.getElementById( 'top' ).value,
			left: document.getElementById( 'left' ).value,
			size: document.getElementById( 'size' ).value,
			color: document.getElementById( 'color' ).value,
			page: document.getElementById( 'page' ).value,
			status: document.getElementById( 'status' ).value,
		} );

		console.log( formData );

		$.ajax( {
			type: "POST",
			url: "../category/post",
			dataType: "json",
			contentType: "application/json",
			data: formData,
			success: function( response ) {
				console.log( response );
			},
			error: function( response ) {
				console.log( formdata )
				console.log( response );
			}
		} )
	}
	</script>
</body>

</html>
